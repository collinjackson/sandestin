<div id="message">Loading..</div>
<div id="counter"></div>

<script>
  console.log("hi console");

  fetch("/api/model", {
          method: "GET",
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json"
          }
//          body: JSON.stringify({test: "stuff"})
        })
          .then(res => res.json())
          .then(data => {
            console.log(data);
            document.querySelector("#message").innerText =
              `Loaded geometry - ${data.pixels.length} pixels`;
          })
          .catch(err => console.log(err));

  let count = 0;
  let webSocket = new WebSocket("ws://localhost:3001");
  webSocket.binaryType = 'arraybuffer';
  webSocket.onmessage = (event) => {
    count ++;
    document.querySelector("#counter").innerText =
              `Received ${count} packets (${event.data.byteLength} bytes long)`;

  }

</script>